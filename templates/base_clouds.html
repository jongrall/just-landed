{% extends "base.html" %}

{% block extra_css %}
    <link rel="stylesheet" href="/static/css/homepage.css?v={{ version }}" />
    <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="/static/css/iphone.css?v={{ version }}" />
{% endblock %}

{% block page_content %}
    <!-- TOP CONTENT -->
    <div id="main-content">
        <div class="clouds-foreground"></div>
        <div class="clouds-midground"></div>
        
        <!-- Lots of nested divs because there's a lot of things happening behind the monolith iPhone -->
        <div class="plane">
            <div class="clouds-background">
                {% block clouds_content %}{% endblock %}
            </div>
        </div>
    </div>
    
    {% block more_clouds_content %}{% endblock %}
{% endblock %}

{% block extra_js %}
    <script type="text/javascript">
        function moveForeground() {
            // 2250px is the width of the clouds graphic. Does one whole loop before calling itself again to start again
            $('.clouds-foreground').css('background-position-x', '0').animate({ 'background-position-x': '-2250px' }, 90000, 'linear', moveForeground);
        }
        
        function moveMidground() {
            // 2250px is the width of the clouds graphic. Does one whole loop before calling itself again to start again
            $('.clouds-midground').css('background-position-x', '0').animate({ 'background-position-x': '-2250px' }, 150000, 'linear', moveMidground);
        }
        
        function moveBackground() {
            $('.clouds-background').css('background-position-x', '0').animate({ 'background-position-x': '-2250px' }, 300000, 'linear', moveBackground);
        }
        
        $(document).ready(function() {
            // Clouds
            moveForeground();
            moveMidground();
            moveBackground();
            
            // Plane in background
            $('.plane').delay(10000).css('background-position-x', '-1012px').animate({ 'background-position-x': '2024px' }, 140000, 'linear');
        });
    </script>
{% endblock %}