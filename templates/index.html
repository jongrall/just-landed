{% extends "base_clouds.html" %}

{% block extra_head %}
    <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
{% endblock %}

{% block clouds_content %}
    <div class="centered clear">
        <!-- iPHONE PREVIEW -->
        <div id="iphone" style="background-image: url('/static/images/homepage/{{ version }}/iphone.png');">
        	<!-- Video Play Buttons -->
            <div id="video-button" class="paused" style="background-image: url('/static/images/homepage/{{ version }}/video_play_retina.png');"></div>
            
        	<!-- iPhone Glare -->
            <div id="iphone-glare" style="background-image: url('/static/images/homepage/{{ version }}/iphone_glare.png');"></div>
            
            <!-- HTML5 Video -->
            <video width="280" height="420" preload="auto" loop="loop" poster="/static/movies/{{ version }}/poster.jpg">
                <source src="/static/movies/{{ version }}/jl_screencast.mp4" type="video/mp4" />
                <source src="/static/movies/{{ version }}/jl_screencast.ogv" type="video/ogg" />
            </video>

            <!-- SCREENSHOT FALLBACK -->
            <img src="/static/images/homepage/{{ version }}/app_screenshot.png" id="image-fallback" width="281" height="421" style="display: none;" />
        </div>

        <!-- APP DETAILS -->
        <div id="details">
            <h1 id="logo"><a href="/" style="background-image: url('/static/images/{{ version }}/logo_retina.png');">Just Landed&trade;</a></h1>
            <h2 id="tagline" style="background-image: url('/static/images/{{ version }}/tagline_retina.png');">&ellip;getting you there on time</h2>

            <a href="http://itunes.com/apps/littledetailsllc/justlanded" target="_blank" id="app-store-button-desktop" class="app-store-button"><img src="/static/images/homepage/{{ version }}/app_store_button_text_retina.png" width="350" height="67" alt="Get the App!" /></a>
            <a href="itms-apps://itunes.com/apps/littledetailsllc/justlanded" id="app-store-button-iphone" class="app-store-button"><img src="/static/images/homepage/{{ version }}/app_store_button_text_retina.png" width="350" height="67" alt="Get the App!" /></a>
        </div>
    </div>
{% endblock %}

{% block more_clouds_content %}
    <!-- BOTTOM CONTENT -->
    <div class="centered">
        <!-- APP FEATURES -->
        <div id="sub-content" class="clear">
            <div class="feature">
                <h2>Easy Airport Pickup</h2>
                <p>The perfect companion to help you pick up friends and family from the airport &ndash; right on time.</p>
            </div>

            <div class="feature">
                <h2>Get Notified</h2>
                <p>We monitor the flight and traffic conditions and notify you when it's time to leave for the airport.</p>
            </div>

            <div class="feature">
                <h2>Be Prepared</h2>
                <p>Get the estimated flight arrival time, terminal, gate, and even baggage claim information.</p>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
    {{ block.super }}

    <script type="text/javascript">
    	var $videoButton = $('#video-button');
    	
        $(document).ready(function() {
            // Show the fallback image only if the browser doesn't support <video>
            if (Modernizr.video) {
                $('#image-fallback').hide();
            } else {
                $('#image-fallback').show()
            }
        });

        $('#iphone').click(function(){
            if ($('video').get(0).paused) {
            	// Play the video
                $('video').get(0).play();
                
                // Change to pause and hide
                $videoButton.attr('style', 'background-image: url("/static/images/homepage/{{ version }}/video_pause_retina.png");').removeClass('paused').hide();
            }
            else {
            	// Pause the video
                $('video').get(0).pause();
                
                // Change to play and show
                $videoButton.attr('src', 'background-image: url("/static/images/homepage/{{ version }}/video_play_retina.png");').addClass('paused').show();
            }
        });
        
        $('#iphone').hover(
        	function() {
	        	$videoButton.show();
        	},
        	function() {
        		if (!$videoButton.hasClass('paused')) {
	        		$videoButton.hide();
	        	}
        	}
        );
    </script>
{% endblock %}